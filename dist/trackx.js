!function(){"use strict";!function(){var e,n;function t(e){return new URLSearchParams(window.location.search).get(e)||null}function o(){const e=navigator.userAgent.toLowerCase();return/mobile|android|iphone|ipad|phone/i.test(e)?"Mobile":/tablet|ipad/i.test(e)?"Tablet":"Desktop"}function i(){const e=performance.timing;return(e.loadEventEnd-e.navigationStart)/1e3}async function r(e,n={}){const r=localStorage.getItem("sessionId")||crypto.randomUUID();localStorage.setItem("sessionId",r);const a=localStorage.getItem("anonymousId")||crypto.randomUUID();localStorage.setItem("anonymousId",a);const s=await async function(){try{const e=await fetch("https://api.ipify.org?format=json");return(await e.json()).ip||"Unknown"}catch(e){return"Unknown"}}(),c=function(){var e,n,t,o,i;const r=navigator.userAgent;return/chrome|crios|crmo/i.test(r)?{name:"Chrome",version:(null==(e=r.match(/chrome\/(\d+)/i))?void 0:e[1])||"Unknown"}:/firefox|fxios/i.test(r)?{name:"Firefox",version:(null==(n=r.match(/firefox\/(\d+)/i))?void 0:n[1])||"Unknown"}:/safari/i.test(r)&&!/chrome/i.test(r)?{name:"Safari",version:(null==(t=r.match(/version\/(\d+)/i))?void 0:t[1])||"Unknown"}:/msie|trident/i.test(r)?{name:"IE",version:(null==(o=r.match(/(?:msie |rv:)(\d+)/i))?void 0:o[1])||"Unknown"}:/edg/i.test(r)?{name:"Edge",version:(null==(i=r.match(/edg\/(\d+)/i))?void 0:i[1])||"Unknown"}:{name:"Unknown",version:"Unknown"}}(),d=function(){var e,n,t,o,i,r;const a=navigator.userAgent.toLowerCase();return/windows/i.test(a)?{name:"Windows",version:(null==(e=/windows nt ([\d.]+)/i.exec(a))?void 0:e[1])||"Unknown"}:/mac os/i.test(a)?{name:"macOS",version:(null==(t=null==(n=/mac os x ([\d._]+)/i.exec(a))?void 0:n[1])?void 0:t.replace(/_/g,"."))||"Unknown"}:/android/i.test(a)?{name:"Android",version:(null==(o=/android ([\d.]+)/i.exec(a))?void 0:o[1])||"Unknown"}:/iphone|ipad|ios/i.test(a)?{name:"iOS",version:(null==(r=null==(i=/os ([\d._]+)/i.exec(a))?void 0:i[1])?void 0:r.replace(/_/g,"."))||"Unknown"}:/linux/i.test(a)?{name:"Linux",version:"Unknown"}:{name:"Unknown",version:"Unknown"}}(),m={event_id:crypto.randomUUID(),event_type:e,event_timestamp:(new Date).toISOString(),session_id:r,user_id:localStorage.getItem("userId")||null,anonymous_id:a,project_id:"your-project-id",page_url:window.location.href,page_title:document.title,referrer_url:document.referrer||null,device_type:o(),browser:c.name,browser_version:c.version,os:d.name,os_version:d.version,screen_resolution:`${window.screen.width}x${window.screen.height}`,viewport_size:`${window.innerWidth}x${window.innerHeight}`,page_load_time:i(),entry_page:"/"===window.location.pathname,exit_page:"hidden"===document.visibilityState,language:navigator.language,ip_address:s,location_country:"Fetching...",location_city:"Fetching...",utm_source:t("utm_source"),utm_medium:t("utm_medium"),utm_campaign:t("utm_campaign"),utm_term:t("utm_term"),utm_content:t("utm_content"),...n};console.log("Tracking Event:",m),fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}).then((e=>e.json())).then((e=>console.log("Event Tracked:",e))).catch((e=>console.error("Tracking Error:",e)))}document.addEventListener("click",(e=>{e.target.closest("button, a")&&r("click",{element:e.target.tagName,element_text:e.target.innerText})})),document.addEventListener("submit",(e=>{r("form_submit",{form_id:e.target.id||"unknown-form"})})),document.addEventListener("keydown",(e=>{"Enter"===e.key&&e.target.matches("input[type='search']")&&r("search",{query:e.target.value})})),null==(e=document.getElementById("start-chat"))||e.addEventListener("click",(()=>{r("chat_start",{chat_with:"support"})})),null==(n=document.getElementById("end-chat"))||n.addEventListener("click",(()=>{r("chat_end",{chat_duration:120})})),window.TrackX={trackEvent:r}}()}();
